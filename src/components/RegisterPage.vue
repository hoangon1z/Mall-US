<template>
<div data-v-f9362c67="" class="resgister__C-form">
    <div data-v-f9362c67="" class="tab-content activecontent">
        <div data-v-84551eea="" data-v-f9362c67="" class="register__container">
            <div data-v-5f6a9e3a="" data-v-84551eea="" class="phoneInput__container">
                <div data-v-5f6a9e3a="" class="phoneInput__container-label"><img data-v-5f6a9e3a="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAM1BMVEUAAABIgP9Hf/9HgP9If/9If/9Hf/9GgP9Hf/9Kgf9GgP9Hgf9Kf/9Qhv9HgP9HgP9Hgf8yzScUAAAAEHRSTlMAmXO/YEBOf1Yej98wE6+P35gKawAAAHZJREFUSMft0EsOgCAMRdECyh91/6t1RDSN8OpITLjDpmfyaOiC1418oYes6mTRPxZFgQIDHgHPgEZATzDBBH8Cr7MLaGXAHCDzKTB1mU0G1HVVInBbXItAWms2jbKSCOwIRAYyAoFYrv/viLDg/7wQTaOYaeRObJUeiXwXMZUAAAAASUVORK5CYII=" class="phoneInput__container-label__icon"><span data-v-5f6a9e3a="">Username or number phone</span>
                </div>
                <div data-v-5f6a9e3a="" class="phoneInput__container-input">
                    <input data-v-5f6a9e3a="" ref="username" type="text" name="userNumber" placeholder="Please enter your username or numberphone">
                </div>
            </div>
            <div data-v-84551eea="" class="tip">
                <!---->
                <!---->
            </div>
            <!---->
            <div data-v-2c10910c="" data-v-84551eea="" class="passwordInput__container">
                <div data-v-2c10910c="" class="passwordInput__container-label"><img data-v-2c10910c="" class="passwordInput__container-label__icon" data-origin="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAARVBMVEUAAABIgP9Gf/9GgP9Hgf9HgP9HgP9Hgf9Hgf9If/9Gf/9JgP9Hf/9Hgf9Hgf9Hgf9HgP9Ggf9Ggf9Hf/9McP9HgP9Hgf8A23ijAAAAFnRSTlMAmSGDj3FB7985TBMQr6G/X89pVgq/Au04/QAAAS5JREFUSMfdlNkWgyAMRFkSkIK4lv//1CLt0cpWeO28iblMchgg/ym2rRwopRw31lAugH6JK1KXxlAHnCOHN6Kr9dyXoNKfL4UHsVeA2f9nt3n8Dmtl3LQDDZSymkEypKhZAOXJ2g4U9nJHa8a23JOiVGQO5uoz1sPvld3m0QWwMrD1AnM3YK1giZTNAwIW6QqSixWx7+R+aLhnbHCuixhdg6YvA9ekaw7eBlzJTCaWgGiTucYTWKI/YLLGwwnI1DpHyBO4rz+PY0RUaa8FQBwx9No81wQYomnQTkwTcAQ0iBHS6LC/Ad3oIMLdC7dgLgBpZtQ6H1kb8kD/OcQhsCHJBqLlpZLuicMky1lC1yQ8AdMGsM4bZ8kl03unCbO/6kcTPzQ4lh4mOYzIyB/pBbdnSf64MvFTAAAAAElFTkSuQmCC" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAARVBMVEUAAABIgP9Gf/9GgP9Hgf9HgP9HgP9Hgf9Hgf9If/9Gf/9JgP9Hf/9Hgf9Hgf9Hgf9HgP9Ggf9Ggf9Hf/9McP9HgP9Hgf8A23ijAAAAFnRSTlMAmSGDj3FB7985TBMQr6G/X89pVgq/Au04/QAAAS5JREFUSMfdlNkWgyAMRFkSkIK4lv//1CLt0cpWeO28iblMchgg/ym2rRwopRw31lAugH6JK1KXxlAHnCOHN6Kr9dyXoNKfL4UHsVeA2f9nt3n8Dmtl3LQDDZSymkEypKhZAOXJ2g4U9nJHa8a23JOiVGQO5uoz1sPvld3m0QWwMrD1AnM3YK1giZTNAwIW6QqSixWx7+R+aLhnbHCuixhdg6YvA9ekaw7eBlzJTCaWgGiTucYTWKI/YLLGwwnI1DpHyBO4rz+PY0RUaa8FQBwx9No81wQYomnQTkwTcAQ0iBHS6LC/Ad3oIMLdC7dgLgBpZtQ6H1kb8kD/OcQhsCHJBqLlpZLuicMky1lC1yQ8AdMGsM4bZ8kl03unCbO/6kcTPzQ4lh4mOYzIyB/pBbdnSf64MvFTAAAAAElFTkSuQmCC"><span data-v-2c10910c="">Password</span>
                </div>
                <div data-v-2c10910c="" class="passwordInput__container-input">
                    <input data-v-2c10910c="" ref="password" type="password" placeholder="Set login password" maxlength="15" autocomplete="new-password"><img data-v-2c10910c="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAP1BMVEUAAADExMTExMTDw8PExMTFxcXFxcXExMS/v7/FxcXFxcXExMTExMTDw8PExMTFxcXFxcXExMTPz8+/v7/ExMTkagEbAAAAFHRSTlMAIO/ff29fvxDfMD/PoI+fr1AQMBwdwB4AAAFQSURBVDjL5ZJbkoQgDEXDI4iAqN3sf61DIEFHqmvmv/OhEE5ycwvgm0Il+z9uLQU/HJ0OrTvD4IqdoZdbdOHQh+sczphlSmKlvZu4uPZG2bkqfnDRzFlKL/FKuM9cig+/OoLCmcs8Au7ZqUDcG4IW00OGE2Fh040D/G1baeFO8mDo07gmpdUAa5djVGQPgej3OFtuwqZX7U3o1C0RmjevL+/rWLZqVzqnyV0bc70atgVJInPUaR/ip5TkATrmIBYBd3Gq6pGSVWpc18mPY9jYGKk0jgeP0nCjPxtDTgpnZXDkjGy0kgv3AK+4FG6opMmQXJVwob8wK0/jgCu8qWS+c/oU7hJumUqyrl2MOdDLzd85maVs/p6iQScOMnG1HcYXANlBwsriH9zWua2NZ4zmR8l+Jy6Ycotk/czJfQU8kqmRdgwwhU9y7X+F3yx8VfwAZv4b1F/KTEQAAAAASUVORK5CYII=" class="eye">
                </div>
            </div>
            <div data-v-84551eea="" class="register__container-tip" style="display: none;">
                <div data-v-84551eea="" class="tipbg"></div><span data-v-84551eea="">Password must have at least 8 digits and must contain letters and numbers</span>
            </div>
            <div data-v-2c10910c="" data-v-84551eea="" class="passwordInput__container">
                <div data-v-2c10910c="" class="passwordInput__container-label"><img data-v-2c10910c="" class="passwordInput__container-label__icon" data-origin="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAARVBMVEUAAABIgP9Gf/9GgP9Hgf9HgP9HgP9Hgf9Hgf9If/9Gf/9JgP9Hf/9Hgf9Hgf9Hgf9HgP9Ggf9Ggf9Hf/9McP9HgP9Hgf8A23ijAAAAFnRSTlMAmSGDj3FB7985TBMQr6G/X89pVgq/Au04/QAAAS5JREFUSMfdlNkWgyAMRFkSkIK4lv//1CLt0cpWeO28iblMchgg/ym2rRwopRw31lAugH6JK1KXxlAHnCOHN6Kr9dyXoNKfL4UHsVeA2f9nt3n8Dmtl3LQDDZSymkEypKhZAOXJ2g4U9nJHa8a23JOiVGQO5uoz1sPvld3m0QWwMrD1AnM3YK1giZTNAwIW6QqSixWx7+R+aLhnbHCuixhdg6YvA9ekaw7eBlzJTCaWgGiTucYTWKI/YLLGwwnI1DpHyBO4rz+PY0RUaa8FQBwx9No81wQYomnQTkwTcAQ0iBHS6LC/Ad3oIMLdC7dgLgBpZtQ6H1kb8kD/OcQhsCHJBqLlpZLuicMky1lC1yQ8AdMGsM4bZ8kl03unCbO/6kcTPzQ4lh4mOYzIyB/pBbdnSf64MvFTAAAAAElFTkSuQmCC" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAARVBMVEUAAABIgP9Gf/9GgP9Hgf9HgP9HgP9Hgf9Hgf9If/9Gf/9JgP9Hf/9Hgf9Hgf9Hgf9HgP9Ggf9Ggf9Hf/9McP9HgP9Hgf8A23ijAAAAFnRSTlMAmSGDj3FB7985TBMQr6G/X89pVgq/Au04/QAAAS5JREFUSMfdlNkWgyAMRFkSkIK4lv//1CLt0cpWeO28iblMchgg/ym2rRwopRw31lAugH6JK1KXxlAHnCOHN6Kr9dyXoNKfL4UHsVeA2f9nt3n8Dmtl3LQDDZSymkEypKhZAOXJ2g4U9nJHa8a23JOiVGQO5uoz1sPvld3m0QWwMrD1AnM3YK1giZTNAwIW6QqSixWx7+R+aLhnbHCuixhdg6YvA9ekaw7eBlzJTCaWgGiTucYTWKI/YLLGwwnI1DpHyBO4rz+PY0RUaa8FQBwx9No81wQYomnQTkwTcAQ0iBHS6LC/Ad3oIMLdC7dgLgBpZtQ6H1kb8kD/OcQhsCHJBqLlpZLuicMky1lC1yQ8AdMGsM4bZ8kl03unCbO/6kcTPzQ4lh4mOYzIyB/pBbdnSf64MvFTAAAAAElFTkSuQmCC"><span data-v-2c10910c="">Confirm Password</span>
                </div>
                <div data-v-2c10910c="" class="passwordInput__container-input">
                    <input data-v-2c10910c=""  ref="password" type="password" placeholder="Enter password confirmation" maxlength="15" autocomplete="new-password"><img data-v-2c10910c="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAP1BMVEUAAADExMTExMTDw8PExMTFxcXFxcXExMS/v7/FxcXFxcXExMTExMTDw8PExMTFxcXFxcXExMTPz8+/v7/ExMTkagEbAAAAFHRSTlMAIO/ff29fvxDfMD/PoI+fr1AQMBwdwB4AAAFQSURBVDjL5ZJbkoQgDEXDI4iAqN3sf61DIEFHqmvmv/OhEE5ycwvgm0Il+z9uLQU/HJ0OrTvD4IqdoZdbdOHQh+sczphlSmKlvZu4uPZG2bkqfnDRzFlKL/FKuM9cig+/OoLCmcs8Au7ZqUDcG4IW00OGE2Fh040D/G1baeFO8mDo07gmpdUAa5djVGQPgej3OFtuwqZX7U3o1C0RmjevL+/rWLZqVzqnyV0bc70atgVJInPUaR/ip5TkATrmIBYBd3Gq6pGSVWpc18mPY9jYGKk0jgeP0nCjPxtDTgpnZXDkjGy0kgv3AK+4FG6opMmQXJVwob8wK0/jgCu8qWS+c/oU7hJumUqyrl2MOdDLzd85maVs/p6iQScOMnG1HcYXANlBwsriH9zWua2NZ4zmR8l+Jy6Ycotk/czJfQU8kqmRdgwwhU9y7X+F3yx8VfwAZv4b1F/KTEQAAAAASUVORK5CYII=" class="eye">
                </div>
            </div>
            <div data-v-84551eea="" class="register__container-tips" style="display: none;"><span data-v-84551eea="">Mật khẩu hai lần nhập không trùng khớp!</span>
            </div>
            <div data-v-84551eea="" class="register__container-invitation">
                <div data-v-84551eea="" class="register__container-invitation__label"><img data-v-84551eea="" class="register__container-invitation__label-icon" data-origin="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAY1BMVEUAAABGgv9IgP9Hgf9Df/9Hgf9Ggv9Ggf9HgP9Hgf9Hgf9Hgv9Hg/9Gg/9Hgf9Ggf9Ggf9Ggv9Ggv9Oif9Hgv9Ggf9Ggv9Gf/9Ggv9Hgf9Ff/9HgP9Hgf9GgP9Ef/9Fgf9Hgf/8Eko/AAAAIHRSTlMAZh+MJuwzxZ/v359ZPc+8sXkZDfXZqpZMLhC/gn9wUWJUcgwAAADwSURBVEjH7ZLZDoIwEEW7WKWFsqhsrvP/X2k0lDKkDH0xJsTzeHOOMgS2OY72mXFE1tnjon7qeJDstOC7H48tLF+kCwacIHgwFYQO31HBjgpkcRgoWrf1VACes9v2VKB8oKKChxx50EGALwXVebjgFhmUMFDG/kOtPtQV//XRVZskicSmfE+3UHCR7t20E10NWyPmfq9hJHV+4zfTY18YcPginW76goIUEM3oe+4oyAGjiqIGjEEBRIBOiAnEP4gAfXkRfs6m6PUgQUG5HlgUPFd9wzA50GjBMMLQfsbmiJTwr4IFELzMdeDhr3fLtsUL4lFdzyPWZOsAAAAASUVORK5CYII=" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAY1BMVEUAAABGgv9IgP9Hgf9Df/9Hgf9Ggv9Ggf9HgP9Hgf9Hgf9Hgv9Hg/9Gg/9Hgf9Ggf9Ggf9Ggv9Ggv9Oif9Hgv9Ggf9Ggv9Gf/9Ggv9Hgf9Ff/9HgP9Hgf9GgP9Ef/9Fgf9Hgf/8Eko/AAAAIHRSTlMAZh+MJuwzxZ/v359ZPc+8sXkZDfXZqpZMLhC/gn9wUWJUcgwAAADwSURBVEjH7ZLZDoIwEEW7WKWFsqhsrvP/X2k0lDKkDH0xJsTzeHOOMgS2OY72mXFE1tnjon7qeJDstOC7H48tLF+kCwacIHgwFYQO31HBjgpkcRgoWrf1VACes9v2VKB8oKKChxx50EGALwXVebjgFhmUMFDG/kOtPtQV//XRVZskicSmfE+3UHCR7t20E10NWyPmfq9hJHV+4zfTY18YcPginW76goIUEM3oe+4oyAGjiqIGjEEBRIBOiAnEP4gAfXkRfs6m6PUgQUG5HlgUPFd9wzA50GjBMMLQfsbmiJTwr4IFELzMdeDhr3fLtsUL4lFdzyPWZOsAAAAASUVORK5CYII="><span data-v-84551eea="">Referral Code</span>
                </div>
                <div data-v-84551eea="" class="register__container-invitation__input">
                    <input data-v-84551eea="" type="text" ref="invite" auto-complete="new-password" autocomplete="off" name="userNumber"  placeholder="Please enter invitation code" maxlength="20">
                </div>
            </div>
            <div data-v-84551eea="" class="register__container-button">
                <button data-v-84551eea="" @click="register">Sign Up</button>
                <button data-v-84551eea="" class="login" @click="$router.push('/login')">
                    <div data-v-84551eea="" class="account">Already have an account</div>
                    <div data-v-84551eea="" class="loginin" >GO TO LOG IN</div>
                </button>
            </div>
        </div>
    </div>
    <!---->
</div>
</template>

<script>
import axios from 'axios';

export default {
  data() {
    return {
      username: '',
      password: '',
      confirmPassword: '',
      inviteCode: '',
      error: null,
    };
  },
  methods: {
    async register() {
      if (!this.username || !this.password || !this.confirmPassword || !this.inviteCode) {
        this.showErrorToast("Please enter complete information");
        return;
      }
      if (this.password !== this.confirmPassword) {
        this.showErrorToast("Passwords do not match");
        return;
      }
      try {
        const response = await axios.post('/api/webapi/register', {
          username: this.username,
          pwd: this.password,
          invitecode: this.inviteCode,
        });

        if (response.data.status === true) {
          // Assuming the API returns some user data on successful registration
          this.$store.commit('login', response.data.user);
          this.$router.push('/login'); // Redirect to login page or home page as per your flow
        } else {
          this.error = response.data.message;
          this.showErrorToast(this.error);
        }
      } catch (error) {
        this.error = 'An error occurred. Please try again later.';
        this.showErrorToast(this.error);
      }
    },
    showErrorToast(message) {
      const toast = document.querySelector('.van-toast');
      if (toast) {
        toast.style.display = 'block';
        document.querySelector('.van-toast__text').textContent = message;
        setTimeout(() => {
          toast.style.display = 'none';
        }, 3000); // Hide after 3 seconds
      }
    },
  },
};
</script>